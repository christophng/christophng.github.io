(function(f){var k=f("html").hasClass("is-builder");if(!k){var m=document.createElement("script");m.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(m,i);var b=[];function e(o){if("false"==o){return false}var n=/(?:\?v=|\/embed\/|\.be\/)([-a-z0-9_]+)/i.exec(o)||/^([-a-z0-9_]+)$/i.exec(o);return n?n[1]:false}window.onYouTubeIframeAPIReady=function(){var n=n||{};n.YTAPIReady||(n.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"));f(".video-slide").each(function(r){var p=f(this).index();var s=f(this).closest("section");f(".video-container").eq(r).append('<div id ="grt-video-'+r+'" class="grt-background-video" data-video-num="'+r+'"></div>').append('<div class="item-overlay"></div>');f(this).attr("data-video-num",r);if(f(this).attr("data-video-url").indexOf("vimeo.com")!=-1){var o={id:f(this).attr("data-video-url"),width:"100%",height:"100%",loop:true};var q=new Vimeo.Player("grt-video-"+r,o);q.playVideo=Vimeo.play}else{var q=new YT.Player("grt-video-"+r,{height:"100%",width:"100%",videoId:e(f(this).attr("data-video-url")),events:{onReady:g,}})}b.push(q)})};function g(n){if(f(n.target).closest(".grt-slider").hasClass("in")){n.target.playVideo()}}function a(n,o){return"https://img.youtube.com/vi/"+n+"/"+(o||"")+"default.jpg"}}f(document).on("add.cards change.cards",function(p){var q=f(p.target),o=q.find(".grt-gallery-filter-all");if(!q.hasClass("grt-slider-carousel")){return}var r=[];q.find(".grt-gallery-item").each(function(t){var s=(f(this).attr("data-tags")||"").trim();var u=s.split(",");u.map(function(w){var v=w.trim();if(f.inArray(v,r)==-1){r.push(v)}})});if(q.find(".grt-gallery-filter").length>0&&f(p.target).find(".grt-gallery-filter").hasClass("gallery-filter-active")){var n="";q.find(".grt-gallery-filter ul li:not(li:eq(0))").remove();r.map(function(s){n+="<li>"+s+"</li>"});q.find(".grt-gallery-filter ul").append(o).append(n);q.on("click",".grt-gallery-filter li",function(u){$li=f(this);$li.parent().find("li").removeClass("active");$li.addClass("active");var t=$li.closest("section").find(".grt-gallery-row");var s=$li.html().trim();q.find(".grt-gallery-item").each(function(y,z){var w=f(this);var v=w.attr("data-tags");var x=v.split(",");tagsTrimmed=x.map(function(A){return A.trim()});if(f.inArray(s,tagsTrimmed)==-1&&!$li.hasClass("grt-gallery-filter-all")){w.addClass("grt-gallery-item__hided");setTimeout(function(){w.css("left","300px")},200)}else{w.removeClass("grt-gallery-item__hided")}});setTimeout(function(){t.closest(".grt-gallery-row").trigger("filter")},50)})}else{q.find(".grt-gallery-item__hided").removeClass("grt-gallery-item__hided");q.find(".grt-gallery-row").trigger("filter")}if(!k){q.find(".video-slide").each(function(t){var s=f(this).closest(".grt-gallery-item").index()})}if(typeof f.fn.masonry!=="undefined"){q.outerFind(".grt-gallery").each(function(){var s=f(this).find(".grt-gallery-row").masonry({itemSelector:".grt-gallery-item:not(.grt-gallery-item__hided)",percentPosition:true});s.masonry("reloadItems");s.on("filter",function(){s.masonry("reloadItems");s.masonry("layout");f(window).trigger("update.parallax")}.bind(this,s));s.imagesLoaded().progress(function(){s.masonry("layout")})})}});f(".grt-gallery-item").on("click","a",function(n){n.stopPropagation()});var j;var l;function d(){clearTimeout(j);j=setTimeout(h,50)}function h(){var q=f(".grt-gallery .modal");if(!q.length){return}var p=0;var o=10;var r=f(window).width()-p*2;var n=f(window).height()-p*2;q.each(function(){var x,w;var y=f(this).hasClass("in");var s=f(this).find(".modal-dialog");var v=s.find(".carousel-item.active > img");if(s.find(".carousel-item.prev > img, .carousel-item.next > img").length){v=s.find(".carousel-item.prev > img, .carousel-item.next > img").eq(0)}var u=v[0].naturalWidth;var z=v[0].naturalHeight;if(r/n>u/z){var t=n-o*2;x=t*u/z}else{x=r-o*2}x=x>=u?u:x;w=(n-x*z/u)/2;s.css({width:parseInt(x),top:w+p})})}var c=f(document).find(".grt-gallery");c.on("show.bs.modal",function(o){clearTimeout(n);var n=setTimeout(function(){var q=f(o.relatedTarget).parent().index();var p=f(o.target).find(".carousel-item").eq(q).find(".grt-background-video");f(o.target).find(".carousel-item .grt-background-video");if(p.length>0){var r=b[+p.attr("data-video-num")];r.playVideo?r.playVideo():r.play()}},500);d()});c.on("slide.bs.carousel",function(p){var n=f(p.target).find(".carousel-item.active .grt-background-video");if(n.length>0){var o=b[+n.attr("data-video-num")];o.pauseVideo?o.pauseVideo():o.pause()}});f(window).on("resize load",d);c.on("slid.bs.carousel",function(p){var n=f(p.target).find(".carousel-item.active .grt-background-video");if(n.length>0){var o=b[+n.attr("data-video-num")];o.playVideo?o.playVideo():o.play()}d()});c.on("hide.bs.modal",function(n){b.map(function(p,o){p.pauseVideo?p.pauseVideo():p.pause()})})}(jQuery));